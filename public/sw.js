"use strict";(()=>{var n="rico-ouro-cache-v1",r="/offline.html",s=["/","/manifest.json","/icon-192x192.png","/icon-512x512.png",r];self.addEventListener("install",e=>{console.log("Service Worker: Installing..."),e.waitUntil(caches.open(n).then(c=>(console.log("Service Worker: Caching App Shell"),c.addAll(s)))),self.skipWaiting()});self.addEventListener("activate",e=>{console.log("Service Worker: Activating..."),e.waitUntil(caches.keys().then(c=>Promise.all(c.map(t=>{if(t!==n)return console.log("Service Worker: Removing old cache",t),caches.delete(t)})))),self.clients.claim()});self.addEventListener("fetch",e=>{e.request.method==="GET"&&(e.request.url.startsWith("chrome-extension")||e.respondWith(caches.match(e.request).then(c=>c||fetch(e.request).then(t=>{if(!t||t.status!==200||t.type!=="basic")return t;let a=t.clone();return caches.open(n).then(i=>{i.put(e.request,a)}),t}).catch(()=>e.request.mode==="navigate"?caches.match(r):new Response("Offline",{status:503})))))});self.addEventListener("sync",e=>{console.log("Service Worker: Sync event fired",e.tag),e.tag==="sync-data"&&e.waitUntil(o())});async function o(){console.log("Service Worker: Executing background sync...")}})();
