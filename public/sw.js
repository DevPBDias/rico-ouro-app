"use strict";(()=>{var s="rico-ouro-cache-v17",i=["/","/manifest.webmanifest"];self.addEventListener("install",e=>{console.log("Service Worker: Installing..."),e.waitUntil(caches.open(s).then(async r=>{console.log("Service Worker: Caching App Shell");let c=i.map(async t=>{try{await r.add(t),console.log(`Service Worker: Cached ${t}`)}catch(a){console.warn(`Service Worker: Failed to cache ${t}`,a)}});await Promise.all(c)})),self.skipWaiting()});self.addEventListener("activate",e=>{console.log("Service Worker: Activating..."),e.waitUntil(caches.keys().then(r=>Promise.all(r.map(c=>{if(c!==s)return console.log("Service Worker: Removing old cache",c),caches.delete(c)})))),self.clients.claim()});self.addEventListener("fetch",e=>{if(e.request.method!=="GET"||e.request.url.startsWith("chrome-extension"))return;let r=new URL(e.request.url);if(e.request.url.includes("/_next/")||r.pathname.endsWith(".js")){e.respondWith(fetch(e.request).then(c=>{if(c&&c.status===200&&c.type==="basic"){let t=c.clone();caches.open(s).then(a=>{a.put(e.request,t)})}return c}).catch(()=>caches.match(e.request).then(c=>c||new Response("Offline",{status:503}))));return}e.respondWith(caches.match(e.request).then(c=>c||fetch(e.request).then(t=>{if(!t||t.status!==200||t.type!=="basic")return t;let a=t.clone();return caches.open(s).then(n=>{n.put(e.request,a)}),t}).catch(()=>new Response("Offline",{status:503}))))});self.addEventListener("sync",e=>{console.log("Service Worker: Sync event fired",e.tag),e.tag==="sync-data"&&e.waitUntil(o())});async function o(){console.log("Service Worker: Executing background sync...")}})();
